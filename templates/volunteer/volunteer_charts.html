{% for breakdown in stats.volunteer_breakdown %}
    var data = google.visualization.arrayToDataTable([
    ['{{ breakdown.columns.0 }}', '{{ breakdown.columns.1 }}'],
    {% for data in breakdown.data %}
        ['{{ data.0 }}', {{ data.1 }},],
    {% endfor %}
    ]);

    {% if breakdown.chart_id == 'volunteers_by_region' %}
    // GeoChart for volunteers by region
    var options = {
        title: '{{ breakdown.title }}',
        colorAxis: {colors: ['#e3f2fd', '#2196f3', '#0d47a1']},
        backgroundColor: '#f5f5f5',
        datalessRegionColor: '#ffffff',
        defaultColor: '#f5f5f5',
        height: 500,
        width: '100%',
        region: 'world',  // Focus on world view
        resolution: 'countries'
    };
    var chart = new google.visualization.GeoChart(document.getElementById('{{ breakdown.chart_id }}'));
    chart.draw(data, options);
    {% else %}
    // Bar chart for other breakdowns
    var paddingHeight = 120;
    var rowHeight = 40;
    var chartHeight = Math.max(500, (data.getNumberOfRows() * rowHeight) + paddingHeight);
    document.getElementById('{{ breakdown.chart_id }}').style.height = chartHeight + 'px';
    var options = {
    chart: {
    'title':'{{ breakdown.title }}'
    },
    hAxis: {title: '{{ breakdown.columns.1 }}', minValue: 0, format:'0'},
    vAxis: {title: '{{ breakdown.columns.0 }}'},
    height: chartHeight,
    chartArea: {
    width: '75%',
    height: '85%'
    },
    bars: 'horizontal'
    };
    var chart = new google.charts.Bar(document.getElementById('{{ breakdown.chart_id }}'));
    chart.draw(data, google.charts.Bar.convertOptions(options));
    {% endif %}
{% endfor %}
