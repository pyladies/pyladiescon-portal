{% extends "portal/base.html" %}
{% load allauth i18n %}
{% load django_bootstrap5 %}
{% block extra_head %}
    {{ block.super }}
    <!--Google Charts-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
    google.charts.load('current', { 'packages': ['corechart', 'bar'] });
    google.charts.setOnLoadCallback(drawChart);
    function drawChart() {
        {% include "sponsorship/sponsorship_charts.html" %}
        {% include "volunteer/volunteer_charts.html" %}
        {% include "portal/historical_comparison_charts.html" %}
   }
    </script>
    <style>
        .chart-container {
            height: 300px;
        }
    </style>
{% endblock extra_head %}
{% block body %}
{% endblock body %}
{% block content %}
    {% include "portal/registration_callout.html" %}
    <div class="container px-4 py-3" id="featured-3">
        <h2 class="pb-2 border-bottom">
            PyLadiesCon Stats and Numbers
        </h2>
        {% include "sponsorship/sponsorship_stats.html" %}
        <!-- Sponsor/Donate Callout -->
        <div class="container border rounded-3 p-4 mb-4 bg-light">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h3 class="mb-2">
                        Support PyLadiesCon!
                    </h3>
                    <p class="mb-0 text-muted">
                        Help us make PyLadiesCon possible by becoming a sponsor or making a donation.
                        Your support enables us to create an inclusive and accessible conference for the global PyLadies
                        community.
                    </p>
                </div>
                <div class="col-md-4 text-md-end mt-3 mt-md-0">
                    <a href="https://2025.conference.pyladies.com/en/sponsors/"
                       target="_blank"
                       rel="noopener noreferrer"
                       class="btn btn-primary btn-lg me-2 mb-2">
                        <i class="bi bi-building"></i> Sponsor Us
                    </a>
                    <a href="https://2025.conference.pyladies.com/en/donate/"
                       target="_blank"
                       rel="noopener noreferrer"
                       class="btn btn-success btn-lg mb-2">
                        <i class="bi bi-heart-fill"></i> Donate
                    </a>
                </div>
            </div>
        </div>
        {% include "volunteer/volunteer_stats.html" %}
        {% include "attendee/attendee_stats.html" %}
        <!-- Historical Comparison Section -->
        <div class="row mt-5">
            <div class="col-12">
                <h3 class="pb-2 border-bottom">
                    <i class="bi bi-graph-up"></i> Historical Comparison
                </h3>
            </div>
        </div>
        <div class="row g-4 mt-2">
            {% for comparison in stats.historical_comparison %}
                <div class="col-md-6">
                    <div class="card h-100">
                        <div class="card-body">
                            <div id="{{ comparison.chart_id }}" class="chart-container">
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
{% endblock content %}
