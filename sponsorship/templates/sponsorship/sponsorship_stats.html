{% load portal_extras %}
<div class="container  border rounded-3 p-3 mb-4">
    <!-- New: Breakdown of Individual Donations vs Corporate Sponsors -->
    <div class="row mb-4">
        <div class="col-12">
            <h4 class="mb-3">
                Fundraising Breakdown
            </h4>
        </div>
        <div class="col-sm-3">
            <div class="card border-0 bg-light">
                <div class="card-body">
                    <h5 class="card-title">
                        Individual Donations
                    </h5>
                    <h2 class="display-6 text-info">
                        {{ stats.individual_donations_count }}
                    </h2>
                    <p class="text-muted mb-0">
                        donors
                    </p>
                    <h3 class="mt-2 text-info">
                        {{ stats.individual_donations_amount| as_currency }}
                    </h3>
                    <small class="text-muted">raised from individuals</small>
                </div>
            </div>
        </div>
        <div class="col-sm-3">
            <div class="card border-0 bg-light">
                <div class="card-body">
                    <h5 class="card-title">
                        Corporate Sponsors
                    </h5>
                    <h2 class="display-6 text-primary">
                        {{ stats.corporate_sponsors_count }}
                    </h2>
                    <p class="text-muted mb-0">
                        sponsors
                    </p>
                    <h3 class="mt-2 text-primary">
                        {{ stats.corporate_sponsors_amount| as_currency }}
                    </h3>
                    <small class="text-muted">raised from sponsors</small>
                </div>
            </div>
        </div>
        <div class="col-sm-3">
            <div class="card border-0 bg-success text-white">
                <div class="card-body">
                    <h5 class="card-title">
                        Total Funds Raised
                    </h5>
                    <h1 class="display-5">
                        {{ stats.total_funds_raised| as_currency }}
                    </h1>
                    <small>= Corporate + Individual</small>
                </div>
            </div>
        </div>
        <div class="col-sm-3">
            <div class="card border-0 bg-light">
                <div class="card-body">
                    <h5 class="card-title">
                        Progress to Goal
                    </h5>
                    <h1 class="display-5 text-success">
                        {{ stats.sponsorship_towards_goal_percent|floatformat:0 }}%
                    </h1>
                    <small class="text-muted">of $15,000 goal</small>
                </div>
            </div>
        </div>
    </div>
    <!-- Original: Detailed Sponsorship Stats -->
    <div class="row">
        <div class="col-12">
            <h4 class="mb-3">
                Sponsorship Pipeline
            </h4>
        </div>
        <div class="col-sm-3">
            <div class="card border-0">
                <div class="card-body">
                    <h5 class="card-title">
                        Number of Sponsors Committed
                    </h5>
                    <h1 class="display-4 text-primary">
                        {{ stats.sponsorship_committed_count }}
                    </h1>
                    <span class="text-muted">out of {{ stats.sponsorship_total_count }} that were contacted</span>
                </div>
            </div>
        </div>
        <div class="col-sm-3">
            <div class="card border-0">
                <div class="card-body">
                    <h5 class="card-title">
                        Sponsorship Paid
                    </h5>
                    <h1 class="display-4 text-success">
                        {{ stats.sponsorship_paid_amount| as_currency }}
                    </h1>
                    <span class="text-muted">from {{ stats.sponsorship_paid_count }} sponsors</span>
                </div>
            </div>
        </div>
        <div class="col-sm-3">
            <div class="card border-0">
                <div class="card-body">
                    <h5 class="card-title">
                        Pending Sponsorship Amount
                    </h5>
                    <h1 class="display-4 text-warning">
                        {{ stats.sponsorship_pending_amount | as_currency }}
                    </h1>
                    <span class="text-muted">from {{ stats.sponsorship_pending_count }} sponsors</span>
                </div>
            </div>
        </div>
        <div class="col-sm-3">
            <div class="card border-0">
                <div class="card-body">
                    <h5 class="card-title">
                        Total Sponsorship Committed
                    </h5>
                    <h1 class="display-4 text-success">
                        {{ stats.sponsorship_committed_amount| as_currency }}
                    </h1>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-3">
            <div class="card border-0">
                <div class="card-body">
                    <h5 class="card-title">
                        We've raised
                    </h5>
                    <h1 class="display-4 text-success">
                        {{ stats.sponsorship_towards_goal_percent|floatformat:0 }}%
                    </h1>
                    <span class="text-muted">towards our goal of $15,000</span>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="progress">
            <div class="progress-bar bg-success" role="progressbar"
                style="width: {{ stats.sponsorship_paid_percent|floatformat:2 }}%"
                aria-valuenow="{{ stats.sponsorship_paid_percent|floatformat:2 }}" aria-valuemin="0"
                aria-valuemax="100">
                {{ stats.sponsorship_paid_percent|floatformat:2 }}% paid
            </div>
        </div>
    </div>
    <div class="row">
        {% for breakdown in stats.sponsorship_breakdown %}
        <div class="col-6" id="{{ breakdown.chart_id }}">
        </div>
        {% endfor %}
    </div>
</div>